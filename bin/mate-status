#!/bin/bash

i3() {
  i3-msg -t get_workspaces \
    | jq -r '.[] | "\(if .focused then 1 else 0 end) \(.num)"' \
    | awk 'BEGIN { split("âŠ â‹ âŒ â â â â â‘ â’ â“", white); \
                   split("â€ â â‚ âƒ â„ â… â† â‡ âˆ â‰", black); } \
         { if ($1) print white[$2]; else print black[$2]; }' \
    | paste -sd' '
}

battery() {
  acpi -a | grep -q on-line && printf 'ğŸ”Œ' || printf 'ğŸ”‹'
  acpi -b | sed 's/.*\b\([0-9]\+\%\).*/\1/' | paste -sd:
}

clock() {
  date '+%Fï½œ%H:%M'
}

printf '%sï½œ' "$(i3)" "$(battery)" "$(clock)"
